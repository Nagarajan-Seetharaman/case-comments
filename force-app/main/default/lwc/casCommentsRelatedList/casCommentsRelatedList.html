<template>   
    
    <div class="spinner">
        <template if:true={isLoading}>
             <lightning-spinner alternative-text="Loading" variant="brand" size="large">
             </lightning-spinner>             
        </template>
    </div>

    <article class="slds-card lightning-card slds-card_boundary headerBottomBorder cardDisplay">
        <div class="slds-card__header slds-grid" style="height: 50px;">
          <header class="slds-media slds-media_center slds-has-flexi-truncate ">
            <div class="slds-media__figure">
                <lightning-icon icon-name="standard:case_comment" size="medium"></lightning-icon>
            </div>
            <div class="slds-media__body">
              <h2 class="slds-card__header-title">
                <span>Case Comments</span>
              </h2>
            </div>
            <div class="slds-no-flex">
              <lightning-layout>
                <lightning-layout-item>
                  <lightning-button icon-name="action:refresh" onclick={handleRefreshRecord}></lightning-button>
                </lightning-layout-item>
                <lightning-layout-item>
                  <lightning-button label="New" onclick={handleCreateRecord}></lightning-button>
                </lightning-layout-item>
              </lightning-layout>                
            </div>
          </header>
        </div>
        
        <template if:true={data}>
            <div>
                <lightning-datatable class="relatedList"
                                    onrowaction={handleRowAction}
                                    columns={columns}
                                    data={data}
                                    key-field="Id"
                                    hide-checkbox-column="true"
                                    >
                </lightning-datatable>
                <template if:true={isNoDataFound}>
                  <span style="font-weight: bold;">No items to display</span>
                </template>   
            </div>
            <!-- <footer class="slds-card__footer">
                <a onclick={handleGotoRelatedList}>View All</a>
            </footer>                             -->
        </template>      
      </article>

      <!--###### MODAL BOX Start######-->
      <template if:true={openModal}>
        <section  class="slds-modal slds-fade-in-open">          
          <template if:true={showModalLoading}>
            <lightning-spinner alternative-text="Loading" size="large" variant="brand"></lightning-spinner>
          </template>
            <div class="slds-modal__container modalWidth">              
                <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModalAction}>
                       <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small" ></lightning-icon>
                    </button>
                    <h2 class="slds-text-heading_medium slds-hyphenate">{record.Title}</h2>
                 </header>

                 <div class="slds-modal__content slds-p-around_medium">                                     
                   <div class="slds-grid slds-wrap">                    
                    <div class="slds-col slds-size_1-of-2 modalPadding">
                      <lightning-combobox
                            name="Classification"
                            label="Classification"
                            value={record.Classification}
                            placeholder="Select Progress"
                            options={classsifyPickList}
                            onchange={handleFieldChange}
                            ></lightning-combobox>
                    </div>
                    <div class="slds-col slds-size_1-of-2 modalPadding">
                      <!-- <lightning-combobox
                            name="Classification"
                            label="Classification"
                            value={record.Classification}
                            placeholder="Select Progress"
                            options={classsifyPickList}
                            onchange={handleFieldChange}
                            ></lightning-combobox> -->
                    </div>                    
                    <div class="slds-col slds-size_1-of-1 modalPadding">
                      <lightning-textarea name="CommentBody" onchange={handleFieldChange} label="Case Comment" value={record.CommentBody}></lightning-textarea>
                    </div>
                    <div class="slds-col slds-size_1-of-2 modalPadding">
                      <lightning-dual-listbox name="languages"
                            label="Select Languages"
                            source-label="Available"
                            selected-label="Selected"
                            field-level-help="Select your preferred languages"
                            options={emailAddressFrmCase}
                            onchange={handleChange} disable-reordering></lightning-dual-listbox>
                    </div>
                    <div class="slds-col slds-size_1-of-2 modalPadding">
                      <lightning-dual-listbox name="languages"
                            label="Select Languages"
                            source-label="Available"
                            selected-label="Selected"
                            field-level-help="Select your preferred languages"
                            options={dualBoxValues}
                            onchange={handleChange} disable-reordering></lightning-dual-listbox>
                    </div>
                  </div>
                   
                 </div>
                 <footer class="slds-modal__footer">
                    <lightning-button class="modalPadding" variant="neutral" label="Close" title="Close"  onclick={closeModalAction}></lightning-button>
                    <lightning-button variant="brand" label="Save" title="Save"  onclick={saveModalAction}></lightning-button>
               </footer> 
            </div>           
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <!--###### MODAL BOX Start For Edit######-->
    <template if:true={openModalForEdit}>
      <section  class="slds-modal slds-fade-in-open">
          <div class="slds-modal__container modalWidth">
              <header class="slds-modal__header">
                  <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModalActionForEdit}>
                     <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small" ></lightning-icon>
                  </button>
                  <h2 class="slds-text-heading_medium slds-hyphenate">{recordEdit.Title}</h2>
               </header>

               <div class="slds-modal__content slds-p-around_medium">                   
                 <div class="slds-grid slds-wrap">                    
                  <div class="slds-col slds-size_1-of-2 modalPadding">
                    <lightning-combobox
                          name="Classification"
                          label="Classification"
                          value={recordEdit.Classification}
                          placeholder="Select Progress"
                          options={classsifyPickList}
                          onchange={handleFieldChangeEdit}
                          ></lightning-combobox>
                  </div>
                  <div class="slds-col slds-size_1-of-2 modalPadding">
                    
                  </div>                    
                  <div class="slds-col slds-size_1-of-1 modalPadding">
                    <lightning-textarea name="CommentBody" onchange={handleFieldChangeEdit} label="Case Comment" value={recordEdit.CommentBody}></lightning-textarea>
                  </div>                  
                </div>                 
               </div>
               <footer class="slds-modal__footer">
                  <lightning-button class="modalPadding" variant="neutral" label="Close" title="Close"  onclick={closeModalActionForEdit}></lightning-button>
                  <lightning-button variant="brand" label="Save" title="Save"  onclick={EditModalAction}></lightning-button>
             </footer> 
          </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open"></div>
  </template>

    <!--###### MODAL BOX Start For Delete######-->
    <template if:true={openModalForDel}>
      <section  class="slds-modal slds-fade-in-open">        
          <template if:true={showModalLoading}>
            <lightning-spinner alternative-text="Loading" size="large" variant="brand"></lightning-spinner>
          </template>
          <div class="slds-modal__container">
              <header class="slds-modal__header">
                  <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModalActionForDel}>
                     <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small" ></lightning-icon>
                  </button>
                  <h2 class="slds-text-heading_medium slds-hyphenate">Delete Case Comment</h2>
               </header>

               <div class="slds-modal__content slds-p-around_medium slds-text-align_center">                                   
                 <span>Are you sure you want to delete this case comment?</span>                 
               </div>
               <footer class="slds-modal__footer">
                  <lightning-button class="modalPadding" variant="neutral" label="Cancel" title="Cancel"  onclick={closeModalActionForDel}></lightning-button>
                  <lightning-button variant="brand" label="Delete" title="Delete"  onclick={deleteModalAction}></lightning-button>
             </footer> 
          </div>        
      </section>
      <div class="slds-backdrop slds-backdrop_open"></div>
  </template>

</template>