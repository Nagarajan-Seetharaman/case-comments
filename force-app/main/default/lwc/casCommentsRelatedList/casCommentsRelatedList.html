<template>   
    
    <div class="spinner">
        <template if:true={isLoading}>
             <lightning-spinner alternative-text="Loading" variant="brand" size="large">
             </lightning-spinner>             
        </template>
    </div>

    <article class="slds-card lightning-card slds-card_boundary headerBottomBorder cardDisplay">
        <div class="slds-card__header slds-grid" style="height: 50px;">
          <header class="slds-media slds-media_center slds-has-flexi-truncate ">
            <div class="slds-media__figure">
                <lightning-icon icon-name="standard:case_comment" size="medium"></lightning-icon>
            </div>
            <div class="slds-media__body">
              <h2 class="slds-card__header-title">
                <span>Case Comments</span>
              </h2>
            </div>
            <div class="slds-no-flex">
              <lightning-layout>
                <lightning-layout-item>
                  <lightning-button icon-name="action:refresh" onclick={handleRefreshRecord}></lightning-button>
                </lightning-layout-item>
                <lightning-layout-item>
                  <lightning-button label="New" onclick={handleCreateRecord}></lightning-button>
                </lightning-layout-item>
              </lightning-layout>                
            </div>
          </header>
        </div>
        
        <template if:true={data}>
            <div>
                <lightning-datatable class="relatedList"
                                    onrowaction={handleRowAction}
                                    columns={columns}
                                    data={data}
                                    key-field="Id"
                                    hide-checkbox-column="true"
                                    >
                </lightning-datatable>   
            </div>
            <!-- <footer class="slds-card__footer">
                <a onclick={handleGotoRelatedList}>View All</a>
            </footer>                             -->
        </template>      
      </article>

      <!--###### MODAL BOX Start######-->
      <template if:true={openModal}>
        <section  class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModalAction}>
                       <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small" ></lightning-icon>
                    </button>
                    <h2 class="slds-text-heading_medium slds-hyphenate">{record.Title}</h2>
                 </header>

                 <div class="slds-modal__content slds-p-around_medium">
                   <table>
                     <tr>
                      <td>
                        <lightning-combobox
                            name="Classification"
                            label="Classification"
                            value={record.Classification}
                            placeholder="Select Progress"
                            options={classsifyPickList}
                            onchange={handleFieldChange}
                            ></lightning-combobox>
                      </td>                     
                    </tr>
                    <tr>
                      <td>
                        <lightning-textarea name="CommentBody" onchange={handleFieldChange} label="Case Comment" value={record.CommentBody}></lightning-textarea>
                      </td>                      
                     </tr>
                   </table>                  
                 </div>
                 <footer class="slds-modal__footer">
                    <lightning-button variant="brand" label="Close" title="Close"  onclick={closeModalAction}></lightning-button>
                    <lightning-button variant="brand" label="Save" title="Save"  onclick={saveModalAction}></lightning-button>
               </footer> 
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

</template>